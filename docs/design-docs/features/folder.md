# 概要

フォルダ機能.

# 対象範囲

## 達成基準

- フォルダ作成用エンドポイントが作成されている
- フォルダ更新用エンドポイントが作成されている
- フォルダ削除用エンドポイントが作成されている
- フォルダ取得用エンドポイントが作成されている

## 除外項目

- ファイル機能の対応は行わない
- パブリック公開の認可対応は行わない

# 利用方法

## エンドポイント

| パス | メソッド | 備考 |
| --- | --- | --- |
| /folders | POST | フォルダ作成 |
| /folders | GET | フォルダ一覧取得 |
| /folders/:id | PUT | フォルダ更新 |
| /folders/:id | DELETE | フォルダ削除 |
| /folders/:id | GET | フォルダ単体取得 |

# 詳細設計

## 要件

- フォルダ名でフォルダの作成を行う
- フォルダ名の変更が行える
- フォルダの削除が行える
- フォルダのコピーが行える
- フォルダの移動が行える
- フォルダ内のフォルダとファイル一覧が取得できる
- 公開フォルダは誰でも閲覧が可能

## 仕様

- フォルダ名は3文字以上255文字以下かつ\\/:*?"<>\|は利用できない
- フォルダパスは重複できない
- 親のフォルダIDが空のフォルダはルートフォルダとする
- 親が非公開の場合は非公開を受け継ぐ

## 値オブジェクト

### Path

| キー | 型 | 備考 |
| --- | --- | --- |
| Path | string | 3文字以上255文字以下 |

## ドメインオブジェクト

### FolderInfo

| キー | 型 | 備考 |
| --- | --- | --- |
| ID | uuid | |
| ParentFolderID | *uuid | |
| Name | string | 3文字以上255文字以下<br />\\/:*?"<>\|は利用不可 |
| Path | Path | |
| IsPublic | bool | |

### FolderBody

| キー | 型 | 備考 |
| --- | --- | --- |
| Path | Path | |

## テーブル

### folder_infos

| カラム名 | 型 | キー | null許容 | 備考 |
| --- | --- | --- | :---: | --- |
| id | char(36) | PK | | ID |
| parent_folder_id | char(36) | FK | * | 親フォルダID |
| name | varchar(255) | | | フォルダ名 |
| path | varchar(255) | UQ | | パス |
| is_public | tinyint(1) | | | 公開フラグ |

## テスト項目

### フォルダ名

| ステータス | テストケース | 入力値 |
| --- | --- | --- |
| 正常系 | 小文字のローマ字のみ | name |
| 正常系 | 大文字のローマ字のみ | NAME |
| 正常系 | 数字のみ | 1234 |
| 正常系 | 小文字, 大文字, 数字の混在 | folderName01 |
| 正常系 | アンダースコアが含まれる | folder_name |
| 異常系 | ひらがな | なまえ |
| 異常系 | カタカナ | ナマエ |
| 異常系 | 漢字 | 名前 |
| 異常系 | バックスラッシュが含まれる | folder\name |
| 異常系 | スラッシュが含まれる | folder/name |
| 異常系 | コロンが含まれる | folder:name |
| 異常系 | アスタリスクが含まれる | folder*name |
| 異常系 | 疑問符が含まれる | folder?name |
| 異常系 | ダブルクォーテーションが含まれる | folder"name |
| 異常系 | 大なり不等号が含まれる | folder<name |
| 異常系 | 小なり不等号が含まれる | folder>name |
| 異常系 | 縦棒が含まれる | folder\|name |
| 異常系 | 2文字 | strings.Repeat("a", 2) |
| 正常系 | 3文字 | strings.Repeat("a", 3) |
| 正常系 | 255文字 | strings.Repeat("a", 255) |
| 異常系 | 256文字 | strings.Repeat("a", 256) |

#### 重複判定

| ステータス | テストケース | 入力値 |
| --- | --- | --- |
| 正常系 | フォルダが存在しない | 重複確認mockの戻り値がfalse |
| 異常系 | フォルダが存在する | 重複確認mockの戻り値がtrue |

# その他の手法

# 参考文献

# 変更履歴

| 変更日 | 変更者 | 変更内容 |
| --- | --- | --- |
| 2025/04/20 | @atsumarukun | 初版 |
